<div class="container mt-4">
  <h2>{{ isEditMode ? 'Edit' : 'Add' }} Employee</h2>
  <form [formGroup]="employeeForm" (ngSubmit)="onSubmit()" class="mt-3">
    <div class="row">
      <!-- Left Column -->
      <div class="col-md-6">
        <div class="mb-3">
          <label for="firstName" class="form-label">First Name</label>
          <input type="text" class="form-control" id="firstName" formControlName="firstName"
                 [class.is-invalid]="hasError('firstName', 'required') || hasError('firstName', 'pattern')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('firstName')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3">
          <label for="lastName" class="form-label">Last Name</label>
          <input type="text" class="form-control" id="lastName" formControlName="lastName"
                 [class.is-invalid]="hasError('lastName', 'required') || hasError('lastName', 'pattern')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('lastName')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">Email</label>
          <input type="email" class="form-control" id="email" formControlName="email"
                 [class.is-invalid]="hasError('email', 'required') || hasError('email', 'email') || hasError('email', 'pattern')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('email')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3">
          <label for="phone" class="form-label">Phone</label>
          <input type="tel" class="form-control" id="phone" formControlName="phone"
                 [class.is-invalid]="hasError('phone', 'required') || hasError('phone', 'pattern')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('phone')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3">
          <label for="empAge" class="form-label">Age</label>
          <input type="number" class="form-control" id="empAge" formControlName="empAge"
                 [class.is-invalid]="hasError('empAge', 'required') || hasError('empAge', 'min') || hasError('empAge', 'max')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('empAge')">
            {{ error }}
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="col-md-6">
        <div class="mb-3">
          <label for="gender" class="form-label">Gender</label>
          <select class="form-control" id="gender" formControlName="gender"
                  [class.is-invalid]="hasError('gender', 'required')">
            <option value="">Select Gender</option>
            <option [value]="Gender.Male">Male</option>
            <option [value]="Gender.Female">Female</option>
          </select>
          <div class="text-danger" *ngFor="let error of getFieldErrors('gender')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3">
          <label for="dateOfJoining" class="form-label">Date of Joining</label>
          <input type="date" class="form-control" id="dateOfJoining" formControlName="dateOfJoining"
                 [class.is-invalid]="hasError('dateOfJoining', 'required')">
          <div class="text-danger" *ngFor="let error of getFieldErrors('dateOfJoining')">
            {{ error }}
          </div>
        </div>

        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="isMarried" formControlName="isMarried">
          <label class="form-check-label" for="isMarried">Married</label>
        </div>

        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="isActive" formControlName="isActive">
          <label class="form-check-label" for="isActive">Active</label>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="d-flex gap-2 mt-3">
      <button type="submit" class="btn btn-primary" [disabled]="employeeForm.invalid || employeeForm.pristine || isSubmitting">
        <span *ngIf="isSubmitting" class="spinner-border spinner-border-sm me-1" role="status" aria-hidden="true"></span>
        {{ isEditMode ? 'Update' : 'Save' }}
      </button>
      <button type="button" class="btn btn-secondary" routerLink="/employees" [disabled]="isSubmitting">Cancel</button>
    </div>
  </form>

  <!-- Error Message -->
  <div class="alert alert-danger mt-3" *ngIf="errorMessage">
    {{ errorMessage }}
  </div>

  <!-- Form Status Info -->
  <div class="mt-3 text-muted" *ngIf="employeeForm.invalid">
    <small>Please fill in all required fields correctly to enable the save button.</small>
  </div>
</div>
